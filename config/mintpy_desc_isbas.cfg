##------ Brumadinho InSAR — MintPy ISBAS-like Configuration (DESCENDING/track-155 orbit) ------##
## ISBAS-like variant: lower coherence thresholds + variance weighting to recover
## intermittently coherent pixels (dam face, tailings margins).
## Compare results against mintpy_desc.cfg (standard SBAS).
##
## Key differences from mintpy_desc.cfg:
##   network.minCoherence         0.7  → 0.5   (keep more interferograms)
##   networkInversion.weightFunc  no   → var   (weight by 1/variance ∝ coherence)
##   networkInversion.maskThreshold 0.4 → 0.2  (mask fewer pixels per ifgram)
## -----------------------------------------------------------------------------------------

########## 1. Load Data (from ASF HyP3 INSAR_GAMMA products)
mintpy.load.processor        = hyp3
mintpy.load.unwFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/desc/*/*_unw_phase.tif
mintpy.load.corFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/desc/*/*_corr.tif
mintpy.load.demFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/desc/*/*_dem.tif
mintpy.load.incAngleFile     = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/desc/*/*_lv_theta.tif
mintpy.load.azAngleFile      = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/desc/*/*_lv_phi.tif
mintpy.load.waterMaskFile    = no

########## 2. Modify Network
mintpy.network.coherenceBased = yes
mintpy.network.minCoherence   = 0.5   # ISBAS: lowered from 0.7 — keep more pairs
mintpy.network.tempBaseMax    = 180
mintpy.network.perpBaseMax    = 200

########## 3. Reference Point
mintpy.reference.lalo         = -20.06,-44.08
mintpy.reference.maskFile     = maskTempCoh.h5

########## 4. Unwrapping Error Correction
mintpy.unwrapError.method     = no

########## 5. Inversion (ISBAS-like)
mintpy.networkInversion.weightFunc    = var    # ISBAS: variance weighting (was: no)
mintpy.networkInversion.minNormVelocity = yes
mintpy.networkInversion.maskDataset   = coherence
mintpy.networkInversion.maskThreshold = 0.2   # ISBAS: lowered from 0.4

########## 6. Local Oscillator Drift Correction (Sentinel-1 specific)
mintpy.correct.LOD            = yes

########## 7. Tropospheric Delay Correction
mintpy.troposphericDelay.method      = pyaps
mintpy.troposphericDelay.weatherModel = ERA5

########## 8. Deramping
mintpy.deramp                 = linear

########## 9. Topographic Residual Correction
mintpy.topographicResidual    = yes

########## 10. Residual RMS
mintpy.residualRMS.maskFile   = maskTempCoh.h5
mintpy.residualRMS.ramp       = quadratic
mintpy.residualRMS.threshold  = 0.02

########## 11. Reference Date
mintpy.reference.date         = auto

########## 12. Velocity
mintpy.velocity.startDate     = 20170701
mintpy.velocity.endDate       = 20190125

########## 13. Geocoding
mintpy.geocode.laloStep       = -0.0001,0.0001
mintpy.geocode.SNWE           = -20.30,-19.92,-44.35,-43.95
mintpy.geocode.fillValue      = nan

########## 14. Google Earth Output
mintpy.save.kmz               = yes

########## Working Directory
mintpy.workDir                = /home/amin/Documents/PythonProjects/EarthMovements/processing/mintpy/desc_isbas
