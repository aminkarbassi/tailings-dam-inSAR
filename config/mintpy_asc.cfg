##------ Brumadinho InSAR Analysis — MintPy Configuration (ASCENDING orbit) ------##
## Generated for ISCE2 topsStack output, SBAS method, Sentinel-1 IW SLC
## Study period: 2017-07-01 to 2019-01-25 | Track: ~83
##
## Edit paths below to match your actual processing directories.
## Run:  smallbaselineApp.py mintpy_asc.cfg
## ---------------------------------------------------------------------------------

########## 1. Load Data (from ASF HyP3 INSAR_GAMMA products)
mintpy.load.processor        = hyp3
mintpy.load.unwFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_unw_phase.tif
mintpy.load.corFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_corr.tif
mintpy.load.demFile          = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_dem.tif
mintpy.load.incAngleFile     = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_lv_theta.tif
mintpy.load.azAngleFile      = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_lv_phi.tif
mintpy.load.waterMaskFile    = /home/amin/Documents/PythonProjects/EarthMovements/data/hyp3/asc/*/*_water_mask.tif

########## 2.########## 2. Modify Network
## Remove interferograms with coherence below threshold (SBAS quality control)
mintpy.network.coherenceBased = yes
mintpy.network.minCoherence   = 0.7
## Drop pairs with excessive temporal or spatial baseline
mintpy.network.tempBaseMax    = 180
mintpy.network.perpBaseMax    = 200

########## 3. Reference Point
## Coordinates of stable ground NE of dam (rocky bedrock).
## *** VERIFY this point has high coherence in the average coherence map ***
## *** before running MintPy — adjust if needed. ***
mintpy.reference.lalo         = -20.06,-44.08
mintpy.reference.maskFile     = maskTempCoh.h5

########## 4. Unwrapping Error Correction
## bridging+phase_closure is the most robust method for SBAS networks.
## It detects and corrects integer-cycle unwrapping errors using loop closure.
mintpy.unwrapError.method     = no

########## 5. Inversion (SBAS)
mintpy.networkInversion.weightFunc   = no     # Unweighted SBAS
mintpy.networkInversion.minNormVelocity = yes  # Minimum-norm velocity constraint
mintpy.networkInversion.maskDataset  = coherence
mintpy.networkInversion.maskThreshold = 0.4   # Per-interferogram coherence mask

########## 6. Local Oscillator Drift Correction (Sentinel-1 specific)
mintpy.correct.LOD            = yes

########## 7. Tropospheric Delay Correction
## Options: no | pyaps (ERA5, free) | gacos (most accurate, needs registration)
## Use pyaps for initial processing; switch to gacos for final results.
mintpy.troposphericDelay.method      = no
mintpy.troposphericDelay.weatherModel = ERA5
## If using GACOS, comment out the two lines above and uncomment below:
# mintpy.troposphericDelay.method    = gacos
# mintpy.troposphericDelay.gacosDir  = /home/amin/Documents/PythonProjects/EarthMovements/data/gacos/asc/

########## 8. Deramping (remove long-wavelength orbital ramps)
mintpy.deramp                 = linear

########## 9. Topographic Residual Correction (DEM error)
mintpy.topographicResidual    = yes

########## 10. Residual RMS (identify and flag noisy epochs)
mintpy.residualRMS.maskFile   = maskTempCoh.h5
mintpy.residualRMS.ramp       = quadratic
mintpy.residualRMS.threshold  = 0.02  # radians — flag epochs above this

########## 11. Reference Date
## Use earliest date as reference (all displacements relative to first acquisition)
mintpy.reference.date         = auto

########## 12. Velocity
## Fit linear velocity to full time-series
mintpy.velocity.startDate     = 20170701
mintpy.velocity.endDate       = 20190125

########## 13. Geocoding
## Output in geographic coordinates (lat/lon).
## *** laloStep MUST match mintpy_desc.cfg for valid 2D decomposition ***
mintpy.geocode.laloStep       = -0.0001,0.0001
mintpy.geocode.SNWE           = -20.30,-19.92,-44.35,-43.95
mintpy.geocode.fillValue      = nan

########## 14. Google Earth Output (optional KMZ)
mintpy.save.kmz               = yes

########## Working Directory
mintpy.workDir                = /home/amin/Documents/PythonProjects/EarthMovements/processing/mintpy/asc
